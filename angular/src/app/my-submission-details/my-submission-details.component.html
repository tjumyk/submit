<app-error-message [error]="error"></app-error-message>
<app-success-message [success]="success"></app-success-message>
<div class="ui text loader active" *ngIf="loadingSubmission">Loading submission info...</div>

<div *ngIf="submission">
  <div class="ui breadcrumb">
    <a class="section" routerLink="..">My Submissions</a>
    <i class="icon right angle divider"></i>
    <div class="active section">Submission {{submission.id}}</div>
  </div>

  <div class="ui segment">
    <div class="ui list horizontal">
      <div class="item">
        <div class="header">Submitted At</div>
        {{ submission.created_at | date: 'medium' }} ({{createdFromNow}})
      </div>
    </div>
  </div>

  <h4 class="ui header">
    <i class="icon copy outline"></i>
    Files
  </h4>
  <table class="ui table unstackable">
    <thead><tr><th>#</th><th>ID</th><th>Name</th><th>Size</th><th>MD5 Hash</th><th>Operations</th></tr></thead>
    <tbody>
    <tr *ngFor="let file of submission.files; index as i">
      <td>{{i+1}}</td>
      <td>{{file.id}}</td>
      <td>{{file.requirement.name}}</td>
      <td>{{file.size | size}}</td>
      <td><span [attr.data-tooltip]="file.md5" data-position="bottom center">{{file.md5|slice:0:6}}</span></td>
      <td>
        <div class="ui mini buttons">
          <a class="ui icon button" href="api/my-submissions/{{submissionId}}/files/{{file.id}}/view" target="_blank"
             title="View">
            <i class="icon eye"></i>
          </a>
          <a class="ui icon button" href="api/my-submissions/{{submissionId}}/files/{{file.id}}/download"
             title="Download">
            <i class="icon download"></i>
          </a>
        </div>
      </td>
    </tr>
    </tbody>
  </table>

  <ng-container *ngIf="task.evaluation_method=='auto_test'">
    <h4 class="ui header">
      <i class="icon terminal"></i>
      Auto Tests
    </h4>

    <ng-container *ngIf="autoTests">
      <app-auto-test-card *ngFor="let test of autoTests" [test]="test" [config]="test.config"></app-auto-test-card>
    </ng-container>
  </ng-container>
</div>
