<app-error-message [error]="error"></app-error-message>
<div class="ui text loader active" *ngIf="loadingStatus">Loading status...</div>

<div *ngIf="status" class="ui grid centered stackable">
  <div class="column ten wide">
    <div class="ui message info icon" *ngIf="status.special_consideration">
      <i class="icon heart outline"></i>
      <div class="content">
        <div class="header">
          We have special considerations on
          <span *ngIf="task.is_team_task; else userSpecialHint">your team</span>
          <ng-template #userSpecialHint>you</ng-template>
        </div>
        <ul class="list">
          <li *ngIf="status.special_consideration.due_time_extension">Due time +{{status.special_consideration.due_time_extension}} hours.</li>
          <li *ngIf="status.special_consideration.submission_attempt_limit_extension">Submission attempt limit +{{status.special_consideration.submission_attempt_limit_extension}}.</li>
        </ul>
      </div>
    </div>
    <div class="ui segment">
      <form class="ui form" [ngClass]="{'loading': submitting}" (submit)="submit()">
        <div class="field" *ngFor="let req of task.file_requirements" [ngClass]="{'required': !req.is_optional, 'error': req._form_errors}">
          <label>{{req.name}} <span *ngIf="req.is_optional">(Optional)</span></label>
          <input type="file" name="{{req.name}}" [accept]="req._extension || '*/*'" (change)="updateFile(req, inputFile.files)" #inputFile>
          <div class="errors">
            <label *ngIf="req._form_errors?.required"><i class="icon times"></i> {{req.name}} is required</label>
            <label *ngIf="req._form_errors?.extension"><i class="icon times"></i> Invalid file extension</label>
            <label *ngIf="req._form_errors?.size"><i class="icon times"></i> File is too big (at most {{req.size_limit | size}})</label>
          </div>
        </div>
        <button type="submit" class="ui primary button submit fluid"><i class="icon paper plane outline"></i> Submit</button>
      </form>
    </div>
  </div>
</div>
